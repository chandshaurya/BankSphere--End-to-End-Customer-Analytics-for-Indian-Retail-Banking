# 🏦 BankSphere – End-to-End Customer Analytics for Indian Retail Banking

## 📌 Project Overview
**BankSphere** is a comprehensive **data analytics and visualization project** built in **Power BI** to provide actionable insights into the operations of an Indian retail bank.  
The project combines multiple business domains — **customer segmentation, loan portfolio analysis, profitability tracking, risk assessment, retention/churn, and cross-sell/upsell potential** — into one unified analytics platform.

This solution is designed for **decision-makers in the BFSI sector** to quickly identify revenue opportunities, mitigate risks, and optimize customer relationships.  
The entire workflow covers **data generation, cleaning, integration, modeling, and dashboard design** with advanced DAX measures and storytelling visuals.

---

## 🎯 Project Objectives
The primary goals of this project are to:
1. **Integrate multiple datasets** (Customers, Loans, Transactions, Profitability) into a **single data model**.
2. Create **data-driven executive dashboards** for:
   - **Customer demographics & behavior**
   - **Loan performance & repayment patterns**
   - **Profitability trends & revenue contribution**
   - **Risk & default management**
   - **Retention & churn tracking**
   - **Cross-sell and upsell opportunities**
3. Enable **KPIs and visual analytics** that support:
   - Strategic decision-making
   - Risk mitigation
   - Product optimization
   - Targeted marketing

---

## 🗂 Data Generation (Python + Faker)

The datasets used in **BankSphere** are **synthetic** and were generated using the **[Faker](https://faker.readthedocs.io/en/master/)** Python library to simulate realistic banking data for Indian retail banking scenarios.

### 📌 Process:
1. **Customer Profiles** – Created using Faker’s `name`, `address`, `state`, `occupation`, and `date_of_birth` generators, with additional custom logic for:
   - **Income ranges** aligned with Indian demographics
   - **Account types** (Savings, Current, Salary)
   - **Customer segments** (Platinum, Gold, Regular)

2. **Loan Data** – Generated by assigning:
   - Loan types (Home, Personal, Education, Business)
   - Randomized loan amounts within realistic ranges
   - Interest rates based on loan type
   - Tenure in years
   - Loan disbursement dates tied to customer onboarding year
   - Loan status (`Active`, `Closed`, `Defaulted`)

3. **Transactions** – Simulated transactional activity per customer with:
   - Transaction dates over a 5-year period
   - Categories such as `Groceries`, `Travel`, `Insurance`, `Investments`
   - Debit and credit transactions with realistic frequency

4. **Profitability** – Derived by:
   - Assigning net profit margin per transaction
   - Calculating **Customer Lifetime Value (CLV)** using total transactions and margins




## 📂 Dataset Details

The datasets are synthetic but modeled on **real-world banking scenarios** relevant to India.  
All four files are cleaned and linked in Power BI using **CustomerID** as the primary key.

### 1️⃣ **[customers.csv](https://github.com/chandshaurya/BankSphere--End-to-End-Customer-Analytics-for-Indian-Retail-Banking/blob/main/customers.csv)**
Contains demographic and account-related details for each customer.
- `CustomerID`
- `Name`
- `Age`
- `Gender`
- `City`
- `State`
- `Education`
- `Occupation`
- `Income`
- `CustomerSegment`
- `AccountType`
- `AccountOpenYear`
- `MaritalStatus`

### 2️⃣ `transactions.csv`
Captures customer transaction history.
- `TransactionID`
- `CustomerID`
- `Date`
- `TransactionType`
- `Amount`
- `MerchantCategory`

### 3️⃣ `loans.csv`
Details of customer loans and repayment status.
- `LoanID`
- `CustomerID`
- `LoanType`
- `LoanStatus` (Active, Closed, Defaulted)
- `LoanAmount`
- `InterestRate`
- `TenureYears`
- `DisbursementDate`

### 4️⃣ `profitability.csv`
Tracks profit metrics and lifetime value per customer.
- `CustomerID`
- `TransactionID`
- `NetProfitMargin`
- `CustomerLifetimeValue`

---

## 🛠 Tools & Technologies
- **Power BI** – Data modeling, DAX, dashboard creation
- **SQL** – Data cleaning & transformation
- **Excel** – Initial exploration & validation
- **Python (Pandas)** – Feature engineering & preprocessing
- **DAX Measures** – Custom KPIs for risk, churn, profitability


##  Python-Based Exploratory Data Analysis (EDA)

Alongside Power BI dashboards and SQL queries, **BankSphere** also includes a comprehensive **Python analysis notebook** for deeper data inspection, cleaning, and modeling support.  

###  Key Steps Performed

1. **Data Loading & Inspection**
   - Imported four datasets (`customers.csv`, `loans.csv`, `transactions.csv`, `profitability.csv`) using `pandas`.
   - Verified data types, missing values, and dataset dimensions.

2. **Data Cleaning**
   - Dropped irrelevant/redundant columns (e.g., duplicate `LoanType` in loans dataset).
   - Converted date columns (`AccountOpenDate`, `transaction date`) to `datetime`.
   - Checked for missing values and ensured consistency across datasets.
   - Outlier detection using **IQR method** for columns like:
     - Age, Annual Income (Customers)
     - Loan Amount, Interest Rate (Loans)
     - Transaction Amount (Transactions)
     - RevenueGenerated, NetProfitMargin (Profitability)

3. **Exploratory Data Analysis (EDA)**
   - **Customer Demographics**
     - Gender, Age, Marital Status, Education, Occupation, Account Type.
     - Segment-wise and state-wise distributions.
   - **Transactions**
     - Distribution by type, channel, merchant category.
     - Monthly transaction trends and total amounts by state/occupation.
   - **Loans**
     - Distribution of loan types, loan status, defaults by occupation/state.
     - Risk metrics: defaulted loan amounts by city, segment, tenure.
   - **Profitability**
     - Revenue and CLV by state, occupation, and customer segment.
     - Net Profit Margin across customer segments.

4. **Churn Analysis**
   - Defined churn as customers inactive for **>180 days**.
   - Built churn table with:
     - Last transaction date
     - Days since last transaction
     - Churn status (Active vs Churned)
   - Visualized churn distribution across **city** and **occupation**.

5. **Cross-Sell Opportunities**
   - Identified customers **without any loan** products.
   - Counted and visualized cross-sell pool by **state**.
   - Example finding: ~15,000 customers (~60%) are loan cross-sell targets.

6. **Upsell Candidates**
   - Calculated **average revenue of Gold segment**.
   - Flagged Silver/Regular customers with **revenue above Gold’s average**.
   - Counted and visualized upsell candidates by segment.
   - Example finding: ~6,782 customers (~27%) are strong upgrade prospects.

---

###  Python Libraries Used
- **pandas** – Data manipulation & cleaning  
- **numpy** – Numerical operations  
- **matplotlib** & **seaborn** – Visualization  
- **faker** – Synthetic dataset generation  

---

###  Key Insights from Python Analysis
1. **Customer Segmentation:** Platinum and Gold segments dominate profitability, while Regular has higher churn risk.  
2. **Cross-Sell Pool:** A large share of customers (esp. in urban states) have no loan exposure — ideal for loan cross-sell campaigns.  
3. **Upsell Potential:** Nearly one-third of Silver/Regular customers outperform Gold’s average revenue, making them ideal upgrade targets.  
4. **Risk Management:** Defaults are concentrated in personal loans and certain occupations; tenure plays a strong role in default probability.  
5. **Geographic Trends:** Maharashtra, Karnataka, and Delhi NCR drive both revenue and risk, highlighting the need for region-specific strategies.  



---

## 📊 SQL-Based Analysis

In these, **BankSphere** includes a robust set of **SQL analytical queries** to extract deeper insights directly from the underlying datasets.  
These queries enable **data validation, exploratory analysis, and performance metrics** that complement visual reporting.

---

### **1. Customer Demographics & Segmentation**
1. What is the exact count and percentage of total customers in each CustomerSegment?
2. Which top 5 State and City combinations have the highest number of customers?
3. How many customers fall into predefined income brackets (<5 Lakhs, 5–10 Lakhs, 10–20 Lakhs, 20+ Lakhs)?
4. What is the distribution of customers across different age groups (18–25, 26–35, 36–50, 51+)?
5. What is the average AnnualIncome and Age for customers in the Platinum segment vs Silver segment?
6. What is the average tenure (in years) of customers in each CustomerSegment?
7. Which Occupation has the highest and lowest average AnnualIncome?
8. How many new customers has the bank acquired each year based on AccountOpenDate?

---

### **2. Loan Portfolio & Risk Analysis**
9. What is the loan default rate (default_flag = 1) for each CustomerSegment?
10. What is the average ratio of LoanAmount to AnnualIncome for customers who have defaulted vs those who have not?
11. Which top 5 Cities have the highest total LoanAmount at risk (from defaulted loans)?
12. Which LoanType has the highest number of defaults and the highest total defaulted amount?
13. Is the average InterestRate significantly higher for loans that have defaulted?
14. How many customers hold more than one 'Active' loan simultaneously?

---

### **3. Transaction & Profitability Analysis**
15. Who are the top 20 most profitable customers and what CustomerSegment do they belong to?
16. Which top 5 States contribute the most to the bank’s overall Profitability?
17. What is the average number of transactions per month for Gold vs Regular segment customers?
18. What is the average TransactionAmount for Online Payment vs ATM Withdrawal?
19. Is there a correlation between the total number of transactions a customer makes and their overall Profitability?
20. Which quarter of the year sees the highest total transaction volume?
21. What is the average Profitability of customers who have never taken a loan?
22. What is the total Profitability for customers who have never taken a loan?

---

### **4. Cross-Functional & Behavioral Analysis**
23. What is the demographic profile (avg. Age, Occupation, AnnualIncome) of customers who have defaulted on a Personal Loan?
24. How many Platinum customers with an AnnualIncome over 20 Lakhs do not currently have an active Home Loan?
25. Do customers who default tend to have a higher frequency of ATM Withdrawal transactions in the months leading up to the default?
26. Which TransactionType is most common among customers under the age of 30?
27. Do customers with more than one type of loan have a higher overall CLV score?

---


## 📊 Dashboard Pages & KPIs

The Power BI dashboard is organized into **eight pages** with clear navigation and consistent theme design.

---

### **1️⃣ Executive Overview**
**Purpose:** Provide a snapshot of key banking metrics for leadership teams.

**KPIs:**
- Total Customers
- Total Loans Issued
- Total Transactions
- Total Revenue
- Average Profit per Customer

**Visuals:**
- Customer distribution by **state and gender**
- Loan disbursal by **loan type**
- Monthly transaction trend
- Income range distribution by education level
- Occupation-based customer segmentation
- New account openings by year
- Age group breakdown

**Key Insights:**
- Maharashtra and Karnataka lead in customer base.
- Majority of accounts opened in the last 5 years.
- Professionals and business owners show higher account penetration.

---

### **2️⃣ Loan Portfolio & Risk Analysis**
**Purpose:** Assess loan distribution, performance, and risk exposure.

**KPIs:**
- Total Active Loans
- Average Loan Amount
- Average Interest Rate
- Total Amount Disbursed
- Average Loan Term (Years)

**Risk Metrics:**
- **Total Amount at Risk:** ₹2.69B
- **Default Rate:** 50.5%
- High-value default accounts

**Visuals:**
- Loan distribution by type & status
- Default rates by state & occupation
- Loan term vs default count
- Top 10 customers with defaulted loans
- Loan amount by customer segment

**Key Insights:**
- Home and personal loans form 70% of disbursed value.
- Default rates higher in small business segment.
- Certain states show both high loan penetration and high default.

---

### **3️⃣ Profitability Analysis**
**Purpose:** Understand which customers and products drive profit.

**KPIs:**
- Total Transaction Amount
- Average Transaction Amount
- Total Profit
- Average Profit per Transaction
- Customer Lifetime Value (CLV)

**Visuals:**
- Profitability by customer segment
- Top customers by CLV
- Heatmap: Transaction type vs profit margin
- Revenue share by merchant category
- Profit trends over time

**Key Insights:**
- Platinum segment customers generate highest profit margins.
- Merchant categories like Insurance and Investments are most profitable.
- Certain transaction types yield low margins but high volume.

---

### **4️⃣ Retention & Churn**
**Purpose:** Monitor customer attrition patterns.

**KPIs:**
- Churn Rate
- Total Churned Customers
- Lost Loan Value
- Average Tenure of Churned Customers
- Most Churned Segment

**Visuals:**
- Active vs churned customers
- Churn by occupation & transaction type
- Lost loan value by city
- Tenure comparison (Active vs Churned)
- Churn distribution by state

**Key Insights:**
- Churn rate at 0.65% but includes high-value customers.
- Sales executives show higher churn tendency.
- Customers with low engagement tend to leave earlier.

---

### **5️⃣ Cross-Sell & Upsell Opportunities**
**Purpose:** Identify untapped revenue potential.

**KPIs:**
- Cross-Sell Loan Opportunities
- Upsell Candidates
- Potential Loan Value
- Average Net Profit Margin
- Product Penetration Rate

**Visuals:**
- Product ownership matrix
- Upsell candidates by occupation
- Profitability by transaction type
- Segment-wise upsell potential
- Untapped customers with high income

**Key Insights:**
- Potential ₹8B loan opportunity in existing customer base.
- Upsell potential highest in urban professionals.
- Cross-sell campaigns should target high-income, low-product customers.

---

## 📈 Key Business Insights
1. **Risk Concentration:** Regular segment customers contribute most to defaults, requiring targeted interventions.
2. **Churn Alert:** Small churn rate but high-value customer losses signal need for early retention actions.
3. **Profitability Drivers:** Platinum and Gold segments outperform others in profit contribution.
4. **Cross-Sell Potential:** Large untapped segment in metros with high creditworthiness.
5. **Geographic Patterns:** High growth in western states, but risk concentration in parts of north and south.

---
###  Code Snippet:
```python
from faker import Faker
import pandas as pd
import random

faker = Faker('en_IN')

customers = []
for _ in range(1000):
    customers.append({
        "CustomerID": faker.uuid4(),
        "Name": faker.name(),
        "Age": random.randint(21, 70),
        "Gender": random.choice(["Male", "Female"]),
        "City": faker.city(),
        "State": faker.state(),
        "Occupation": random.choice(["Salaried", "Business", "Professional", "Student"]),
        "Income": random.randint(200000, 2000000),
        "CustomerSegment": random.choice(["Platinum", "Gold", "Regular"]),
        "AccountType": random.choice(["Savings", "Current", "Salary"]),
        "AccountOpenYear": random.randint(2010, 2025)
    })

df_customers = pd.DataFrame(customers)
df_customers.to_csv("customers.csv", index=False)

\``` 
